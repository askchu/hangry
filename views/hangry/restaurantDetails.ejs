<% layout('layouts/boilerplate') %>
<link rel="stylesheet" href="/stylesheets/details.css">


<div id="main" class="">
    <!-- If no picture, use default picture -->

    <% if(results.featured_image) { %>
    <div class="text-center">
        <img id="blah" class="img-fluid img-thumbnail" src="<%=results.featured_image%>" alt="">
    </div>
    <% } else {%>
    <div id="body" class="text-center">
        <img id="blah" class="img-fluid img-thumbnail"
            src="https://images.unsplash.com/photo-1556763947-80fd07e395ad?ixlib=rb-1.2.1&ixid=MXwxMjA3fDB8MHxzZWFyY2h8MzV8fHJlc3RhdXJhbnRzfGVufDB8MHwwfA%3D%3D&auto=format&fit=crop&w=900&q=60"
            alt="">
    </div>
    <% } %>

    <button id="btn" class="text-center btn btn-secondary mb-5" type="button">
        <a class="text-light" href="/hangry/<%=hangry._id%>/search">Back to search results</a>
    </button>

    <div class="card">
        <div class="card-header text-center">
        <form action="/hangry/<%=hangry._id%>/search/<%=results.res_id%>/details" method="POST">
    <button class="text-center mx-auto btn btn-block" type="submit"
        value="<%=results.res_id%>" name="favorite">Add to favorites
    </button>
        </form>
        </div>
        <div class="card-body">
            <div class="row">
                <h2 class="card-title"><%=results.name%></h2>
                <h5><strong>Rating:</strong> <%=results.averageRating%>
                </h5>

                <div class="col-sm-6 col-md-7 col-lg-4 mt-3">
                    <div class="text-left">
                            <p><strong><a class="" href="<%=results.menu%>" target="_blank">Click to see photos and menu</a></strong></p>
                        <p class="card-text"><strong>Location:</strong> <%=results.locality%></p>
                        <p class="card-text"><strong>Address:</strong> <%=results.address%></p>
                        <p class="card-text"><strong>Phone Number:</strong> <%=results.phoneNumber%></p>
                           
                        <div class="d-none d-lg-block">
                            <p><strong>Cuisine Type:</strong> <%=results.cuisineType%></p>
                            <p><strong>Average Cost for Two:</strong> $<%=results.averageCostForTwo%></p>
                        </div>
                    </div>
                </div>

                

                <div class="col-sm-6 col-md-4 col-lg-3 mt-3">
                    <div class="d-block">
                        <h5 class="">Hours of Operation</h5>
                        <div class="commaSeparated">
                            <%=results.timings%>
                        </div>
                    </div>
                </div>

                <div class="col-sm-12 col-md-12 col-lg-5">
                    <!-- MAP BOX -->
                    <div class="card">
                        <div id='map' class="" style='width: 100%; height: 300px;'></div>
                    </div>

                    <div class="d-block d-md-block d-lg-none mt-3">
                        <p>Cuisine Type: <%=results.cuisineType%></p>
                        <p>Average Rating: <strong><%=results.averageRating%></strong>
                        </p>
                        <p>Average Cost for Two: $<%=results.averageCostForTwo%></p>
                    </div>
                </div>


            </div>
        </div>
    </div>
</div>

<!-- MAPBOX -->
<script>
    const mapToken = '<%-process.env.MAPBOX_TOKEN%>';
    const results = <%-JSON.stringify(results) %>
</script>
<script src="/javascripts/showPageMap.js"></script>
<script src="/javascripts/restaurantDetails.js"></script>
